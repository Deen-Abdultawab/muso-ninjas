(function(){"use strict";var e={3116:function(e,l,a){var n=a(9242),t=a(3396),s=a(7139),i=a.p+"img/logo1.d2ccadd9.jpeg";const o={class:"nav-center"},r={class:"left-nav"},u=(0,t._)("img",{src:i,alt:"",class:"logo"},null,-1),c={class:"right-nav"},d={class:"playlist-btns right-nav"},v={class:"user-menu right-nav"},p={key:0,class:"display-name"},g={class:"user-btns right-nav"},y={class:"mobile-nav-center"},m={class:"mobile-toggle"},h={key:0,class:"playlist-btns"},f=(0,t._)("span",{class:"material-icons toggle"},"playlist_add",-1),w=(0,t._)("span",{class:"material-icons toggle"},"featured_play_list",-1),k={key:1,class:"user-btns"},_={class:"content"};function b(e,l,a,n,i,b){const D=(0,t.up)("router-link"),C=(0,t.up)("router-view");return(0,t.wg)(),(0,t.iD)(t.HY,null,[(0,t._)("nav",null,[(0,t._)("div",o,[(0,t._)("div",r,[u,(0,t._)("h1",null,[(0,t.Wm)(D,{to:{name:"home"}},{default:(0,t.w5)((()=>[(0,t.Uk)(" Muso Ninjas ")])),_:1})])]),(0,t._)("div",c,[(0,t._)("div",d,[n.user?((0,t.wg)(),(0,t.j4)(D,{key:0,to:{name:"createPlaylist"}},{default:(0,t.w5)((()=>[(0,t.Uk)("Create Playlist")])),_:1})):(0,t.kq)("",!0),n.user?((0,t.wg)(),(0,t.j4)(D,{key:1,to:{name:"userPlaylist"}},{default:(0,t.w5)((()=>[(0,t.Uk)("My Playlist")])),_:1})):(0,t.kq)("",!0)]),(0,t._)("div",v,[n.user?((0,t.wg)(),(0,t.iD)("span",p,"Hi there, "+(0,s.zw)(n.user.displayName),1)):(0,t.kq)("",!0),(0,t._)("span",{class:"material-icons toggle",onClick:l[0]||(l[0]=e=>n.showMob=!0)},"menu")]),(0,t._)("div",g,[n.user?((0,t.wg)(),(0,t.iD)("button",{key:0,onClick:l[1]||(l[1]=(...e)=>n.handleClick&&n.handleClick(...e))},"Logout")):(0,t.kq)("",!0),n.user?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(D,{key:1,class:"btn",to:{name:"signup"}},{default:(0,t.w5)((()=>[(0,t.Uk)("Signup")])),_:1})),n.user?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(D,{key:2,class:"btn",to:{name:"login"}},{default:(0,t.w5)((()=>[(0,t.Uk)("Log in")])),_:1}))])])])]),(0,t._)("div",{class:(0,s.C_)(["mobile-nav overlay",{show:n.showMob}])},[(0,t._)("div",y,[(0,t._)("div",m,[(0,t._)("span",{class:"material-icons toggle",onClick:l[2]||(l[2]=e=>n.showMob=!1)},"close")]),n.user?((0,t.wg)(),(0,t.iD)("ul",h,[(0,t._)("li",{onClick:l[3]||(l[3]=e=>n.showMob=!1)},[f,(0,t.Wm)(D,{to:{name:"createPlaylist"}},{default:(0,t.w5)((()=>[(0,t.Uk)("Create Playlist")])),_:1})]),(0,t._)("li",{onClick:l[4]||(l[4]=e=>n.showMob=!1)},[w,(0,t.Wm)(D,{to:{name:"userPlaylist"}},{default:(0,t.w5)((()=>[(0,t.Uk)("My Playlist")])),_:1})])])):(0,t.kq)("",!0),n.user?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("ul",k,[(0,t._)("li",{onClick:l[5]||(l[5]=e=>n.showMob=!1)},[(0,t.Wm)(D,{class:"btn",to:{name:"signup"}},{default:(0,t.w5)((()=>[(0,t.Uk)("Signup")])),_:1})]),(0,t._)("li",{onClick:l[6]||(l[6]=e=>n.showMob=!1)},[(0,t.Wm)(D,{class:"btn",to:{name:"login"}},{default:(0,t.w5)((()=>[(0,t.Uk)("Log in")])),_:1})])])),n.user?((0,t.wg)(),(0,t.iD)("button",{key:2,onClick:l[7]||(l[7]=(...e)=>n.handleClick&&n.handleClick(...e)),class:"log-out"},"Logout")):(0,t.kq)("",!0)])],2),(0,t._)("div",_,[(0,t.Wm)(C)])],64)}a(7658);var D=a(2483),C=a(4870),P=a(4275);a(654),a(4059),a(6287);const S={apiKey:"AIzaSyAXicuUcw9MwKRL5QJpsRVOislQaqTPrfM",authDomain:"muso-nimjas.firebaseapp.com",projectId:"muso-nimjas",storageBucket:"muso-nimjas.appspot.com",messagingSenderId:"246870999712",appId:"1:246870999712:web:6e6c8e8f52a7eb469f7fc5"};P.Z.initializeApp(S);const H=P.Z.firestore(),F=P.Z.auth(),I=P.Z.firestore.FieldValue.serverTimestamp,q=P.Z.storage(),U=(0,C.iH)(null),M=(0,C.iH)(!1),j=async()=>{U.value=null,M.value=!0;try{await F.signOut(),M.value=!1}catch(e){console.log(e.message),U.value=e.message,M.value=!1}},A=()=>({error:U,logout:j,isPending:M});var E=A;const L=(0,C.iH)(F.currentUser);F.onAuthStateChanged((e=>{console.log("User state change. Current user is:",e),L.value=e}));const z=()=>({user:L});var N=z,Z={setup(){const{logout:e}=E(),{user:l}=N(),a=(0,D.tv)(),n=(0,C.iH)(!1);async function t(){await e(),console.log("logged out"),n.value=!1,a.push({name:"login"})}return{handleClick:t,user:l,showMob:n}}},O=a(89);const T=(0,O.Z)(Z,[["render",b]]);var V=T;const x={key:0,class:"error"},W={key:1},Y={class:"button"},B={class:"playlist"},K={key:0,class:"playlists"},R={key:1,class:"text"};function $(e,l,a,n,i,o){const r=(0,t.up)("ListView");return(0,t.wg)(),(0,t.iD)(t.HY,null,[n.error?((0,t.wg)(),(0,t.iD)("div",x,(0,s.zw)(n.error),1)):(0,t.kq)("",!0),n.documents?((0,t.wg)(),(0,t.iD)("div",W,[(0,t._)("div",Y,[(0,t._)("button",{class:(0,s.C_)(["btn",{active:!n.showFav}]),onClick:l[0]||(l[0]=(...e)=>n.handleAll&&n.handleAll(...e))},"All",2),(0,t._)("button",{class:(0,s.C_)(["btn",{active:n.showFav}]),onClick:l[1]||(l[1]=(...e)=>n.handleEvent&&n.handleEvent(...e))},"Favourite",2)]),(0,t._)("div",B,[n.showFav?(0,t.kq)("",!0):((0,t.wg)(),(0,t.j4)(r,{key:0,playlists:n.documents,favTag:n.favTag},null,8,["playlists","favTag"]))]),n.showFav?((0,t.wg)(),(0,t.iD)("div",K,[n.favSongsList.length?((0,t.wg)(),(0,t.j4)(r,{key:0,playlists:n.favSongsList},null,8,["playlists"])):((0,t.wg)(),(0,t.iD)("div",R,"Favourite lists is empty.. Go and add your favourite sings"))])):(0,t.kq)("",!0)])):(0,t.kq)("",!0)],64)}const Q=(e,l)=>{const a=(0,C.iH)(null),n=(0,C.iH)(null);let s=H.collection(e).orderBy("createdAt");l&&(s=s.where(...l));const i=s.onSnapshot((e=>{let l=[];e.docs.forEach((e=>{e.data().createdAt&&l.push({...e.data(),id:e.id})})),a.value=l,n.value=null}),(e=>{console.log(e.message),a.value=null,n.value="could not fetch the data"}));return(0,t.m0)((e=>{e((()=>i()))})),{error:n,documents:a}};var G=Q;const J={class:"single"},X={class:"thumbnail"},ee=["src"],le={class:"info"},ae={class:"song-number"},ne=["id"];function te(e,l,a,n,i,o){const r=(0,t.up)("router-link");return(0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.playlists,(e=>((0,t.wg)(),(0,t.iD)("div",{key:e.id,class:"singleList"},[(0,t.Wm)(r,{to:{name:"playlistDetail",params:{id:e.id}}},{default:(0,t.w5)((()=>[(0,t._)("div",J,[(0,t._)("div",X,[(0,t._)("img",{src:e.coverUrl},null,8,ee)]),(0,t._)("div",le,[(0,t._)("h3",null,(0,s.zw)(e.title),1),(0,t._)("p",null,"Created by "+(0,s.zw)(e.userName),1)]),(0,t._)("div",ae,[(0,t._)("p",null,(0,s.zw)(e.songs.length),1)])])])),_:2},1032,["to"]),a.favTag?((0,t.wg)(),(0,t.iD)("div",{key:0,onClick:l[0]||(l[0]=(...e)=>n.handleFav&&n.handleFav(...e)),id:e.listId},[(0,t._)("span",{class:(0,s.C_)(["material-icons",{fav:e.isFav&&e.isFavId.includes(n.user.uid)}])},"favorite_border",2)],8,ne)):(0,t.kq)("",!0)])))),128)}function se(e,l){const a=(0,C.iH)(null),n=(0,C.iH)(!1);let t=H.collection(e).doc(l);async function s(){n.value=!0,a.value=null;try{const e=await t.delete();return n.value=!1,e}catch(e){console.log(e.message),n.value=!1,a.value="document failed to delete"}}async function i(e){n.value=!0,a.value=null;try{const l=await t.update(e);return n.value=!1,l}catch(l){console.log(l.message),n.value=!1,a.value="document update failed"}}return{error:a,isPending:n,deleteDoc:s,updateDoc:i}}var ie=se,oe={props:["playlists","favTag","favSongs"],setup(e){const{user:l}=N();async function a(a){const n=a.target.parentElement.id;e.playlists.filter((async e=>{if(e.listId===n){const{updateDoc:a}=ie("playlists",e.id);if(!0===e.isFav&&e.isFavId.includes(l.value.uid)){console.log("already faved");const n=e.isFavId.findIndex((e=>e===l.value.uid));console.log(n),e.isFavId.splice(n,1),e.isFav=!e.isFav,await a({isFav:e.isFav,isFavId:[...e.isFavId]}),console.log(e.isFavId)}else console.log("not faved"),e.isFav=!e.isFav,await a({isFav:e.isFav,isFavId:[...e.isFavId,l.value.uid]}),console.log(e.isFavId)}}))}return{handleFav:a,user:l}}};const re=(0,O.Z)(oe,[["render",te],["__scopeId","data-v-361dc4b1"]]);var ue=re,ce={name:"HomeView",components:{ListView:ue},setup(){const{user:e}=N(),{error:l,documents:a}=G("playlists"),{documents:n}=G("favouriteSongs",["userId","==",e.value.uid]),t=!0,s=(0,C.iH)(!1),i=(0,C.iH)([]);function o(){i.value=a.value.filter((l=>{if(l.isFav&&l.isFavId.includes(e.value.uid))return l}))}function r(){s.value=!1}function u(){o(),s.value=!0}return console.log(a),{error:l,documents:a,favTag:t,handleEvent:u,favouriteSongs:n,showFav:s,handleAll:r,handleTest:o,favSongsList:i}}};const de=(0,O.Z)(ce,[["render",$],["__scopeId","data-v-2193c526"]]);var ve=de;const pe=(0,t._)("h3",null,"Sign in",-1),ge={key:0,class:"error",required:""},ye={class:"btns"},me={key:0},he={key:1};function fe(e,l,a,i,o,r){return(0,t.wg)(),(0,t.iD)("form",{onSubmit:l[2]||(l[2]=(0,n.iM)(((...e)=>i.handleSubmit&&i.handleSubmit(...e)),["prevent"]))},[pe,(0,t.wy)((0,t._)("input",{type:"email",placeholder:"Email","onUpdate:modelValue":l[0]||(l[0]=e=>i.email=e),required:""},null,512),[[n.nr,i.email]]),(0,t.wy)((0,t._)("input",{type:"password",placeholder:"password","onUpdate:modelValue":l[1]||(l[1]=e=>i.password=e)},null,512),[[n.nr,i.password]]),i.error?((0,t.wg)(),(0,t.iD)("div",ge,(0,s.zw)(i.error),1)):(0,t.kq)("",!0),(0,t._)("div",ye,[i.isPending?((0,t.wg)(),(0,t.iD)("button",he,"Loading")):((0,t.wg)(),(0,t.iD)("button",me,"Log in"))])],32)}const we=(0,C.iH)(null),ke=(0,C.iH)(!1),_e=async(e,l)=>{we.value=null,ke.value=!0;try{const a=await F.signInWithEmailAndPassword(e,l);return we.value=null,ke.value=!1,a}catch(a){console.log(a.message),we.value="Incorrect login credentials",ke.value=!1}},be=()=>({error:we,login:_e,isPending:ke});var De=be,Ce={setup(){const{error:e,login:l,isPending:a}=De(),n=(0,C.iH)(""),t=(0,C.iH)(""),s=(0,D.tv)();async function i(){await l(n.value,t.value);e.value||s.push({name:"userPlaylist"})}return{email:n,password:t,isPending:a,error:e,handleSubmit:i}}};const Pe=(0,O.Z)(Ce,[["render",fe]]);var Se=Pe;const He=(0,t._)("h3",null,"Sign up",-1),Fe={key:0,class:"error",required:""},Ie={class:"btns"},qe={key:0},Ue={key:1};function Me(e,l,a,i,o,r){return(0,t.wg)(),(0,t.iD)("form",{onSubmit:l[3]||(l[3]=(0,n.iM)(((...e)=>i.handleSubmit&&i.handleSubmit(...e)),["prevent"]))},[He,(0,t.wy)((0,t._)("input",{type:"text",placeholder:"display name","onUpdate:modelValue":l[0]||(l[0]=e=>i.displayName=e)},null,512),[[n.nr,i.displayName]]),(0,t.wy)((0,t._)("input",{type:"email",placeholder:"Email","onUpdate:modelValue":l[1]||(l[1]=e=>i.email=e),required:""},null,512),[[n.nr,i.email]]),(0,t.wy)((0,t._)("input",{type:"password",placeholder:"password","onUpdate:modelValue":l[2]||(l[2]=e=>i.password=e)},null,512),[[n.nr,i.password]]),i.error?((0,t.wg)(),(0,t.iD)("div",Fe,(0,s.zw)(i.error),1)):(0,t.kq)("",!0),(0,t._)("div",Ie,[i.isPending?((0,t.wg)(),(0,t.iD)("button",Ue,"Loading")):((0,t.wg)(),(0,t.iD)("button",qe,"Sign up"))])],32)}const je=(0,C.iH)(null),Ae=(0,C.iH)(!1),Ee=async(e,l,a)=>{je.value=null,Ae.value=!0;try{const n=await F.createUserWithEmailAndPassword(e,l);if(!n)throw new Error("Could not complete signup");return await n.user.updateProfile({displayName:a}),je.value=null,Ae.value=!1,n}catch(n){console.log(n.message),je.value=n.message,Ae.value=!1}},Le=()=>({error:je,signup:Ee,isPending:Ae});var ze=Le,Ne={setup(){const{error:e,signup:l,isPending:a}=ze(),n=(0,C.iH)(""),t=(0,C.iH)(""),s=(0,C.iH)(""),i=(0,D.tv)();async function o(){await l(t.value,s.value,n.value);e.value||i.push({name:"userPlaylist"})}return{displayName:n,email:t,password:s,error:e,isPending:a,handleSubmit:o}}};const Ze=(0,O.Z)(Ne,[["render",Me]]);var Oe=Ze;const Te=e=>((0,t.dD)("data-v-adecd850"),e=e(),(0,t.Cn)(),e),Ve=Te((()=>(0,t._)("h4",null,"Creat New Playlist",-1))),xe=Te((()=>(0,t._)("label",null,"Upload playlist cover image",-1))),We={class:"error"},Ye=Te((()=>(0,t._)("div",{class:"error"},null,-1))),Be={key:0},Ke={key:1,disabled:""};function Re(e,l,a,i,o,r){return(0,t.wg)(),(0,t.iD)("form",{onSubmit:l[3]||(l[3]=(0,n.iM)(((...e)=>i.handleSubmit&&i.handleSubmit(...e)),["prevent"]))},[Ve,(0,t.wy)((0,t._)("input",{type:"text",required:"",placeholder:"Playlist Title","onUpdate:modelValue":l[0]||(l[0]=e=>i.title=e)},null,512),[[n.nr,i.title]]),(0,t.wy)((0,t._)("textarea",{required:"",placeholder:"Playlist description...","onUpdate:modelValue":l[1]||(l[1]=e=>i.description=e)},null,512),[[n.nr,i.description]]),xe,(0,t._)("input",{type:"file",onChange:l[2]||(l[2]=(...e)=>i.handleChange&&i.handleChange(...e))},null,32),(0,t._)("div",We,(0,s.zw)(i.fileError),1),Ye,i.isPending?((0,t.wg)(),(0,t.iD)("button",Ke,"saving...")):((0,t.wg)(),(0,t.iD)("button",Be,"Create"))],32)}function $e(){const e=(0,C.iH)(null),l=(0,C.iH)(null),a=(0,C.iH)(null),{user:n}=N();async function t(t){a.value=`covers/${n.value.uid}/${t.name}`;const s=q.ref(a.value);try{const e=await s.put(t);l.value=await e.ref.getDownloadURL()}catch(i){console.log(i.message),e.value=i.message}}async function s(t){a.value=`songs/${n.value.uid}/${t.name}`;const s=q.ref(a.value);try{const e=await s.put(t);l.value=await e.ref.getDownloadURL()}catch(i){console.log(i.message),e.value=i.message}}async function i(l){const a=q.ref(l);try{await a.delete()}catch(n){console.log(n.message),e.value=n.message}}async function o(l){const a=q.ref(l);try{await a.delete()}catch(n){console.log(n.message),e.value=n.message}}return{url:l,filePath:a,error:e,uploadImage:t,deleteImg:i,uploadSong:s,deleteSong:o}}var Qe=$e;const Ge=e=>{const l=(0,C.iH)(null),a=(0,C.iH)(!1),n=async n=>{l.value=null,a.value=!0;try{const l=await H.collection(e).add(n);return a.value=!1,l}catch(t){console.log(t.message),l.value="could not send the message",a.value=!1}};return{error:l,addDoc:n,isPending:a}};var Je=Ge,Xe={setup(){const{url:e,filePath:l,uploadImage:a}=Qe(),{error:n,addDoc:t}=Je("playlists"),{user:s}=N(),i=(0,D.tv)(),o=(0,C.iH)(""),r=(0,C.iH)(""),u=(0,C.iH)(null),c=(0,C.iH)(null),d=["image/png","image/jpeg"],v=(0,C.iH)(!1),p=[1,2,3,4,5,6,7,8,9,"A","B","C","D","E","F"];function g(e){let l=Math.floor(Math.random()*e.length);for(let a=0;a<=12;a++)l+=e[Math.floor(Math.random()*e.length)];return l}async function y(){if(u.value){v.value=!0,await a(u.value);const c=await t({title:o.value,description:r.value,userId:s.value.uid,userName:s.value.displayName,coverUrl:e.value,filePath:l.value,songs:[],createdAt:I(),listId:g(p),isFav:!1,isFavId:[]});v.value=!1,n.value||(i.push({name:"playlistDetail",params:{id:c.id}}),v.value=!1)}}function m(e){c.value=null;const l=e.target.files[0];l&&d.includes(l.type)?(console.log(l),u.value=l,c.value=null):(u.value=null,c.value="Please select an image file (png or jpg)")}return{title:o,description:r,handleSubmit:y,handleChange:m,fileError:c,isPending:v}}};const el=(0,O.Z)(Xe,[["render",Re],["__scopeId","data-v-adecd850"]]);var ll=el;const al={key:0},nl={key:0,class:"error"},tl={key:1},sl={key:0,class:"error"};function il(e,l,a,n,i,o){const r=(0,t.up)("PlaylistDetailComp");return(0,t.wg)(),(0,t.iD)(t.HY,null,[n.playlist?((0,t.wg)(),(0,t.iD)("div",al,[n.error?((0,t.wg)(),(0,t.iD)("div",nl,(0,s.zw)(n.error),1)):(0,t.kq)("",!0),(0,t.Wm)(r,{playlist:n.playlist,ownership:n.ownership,id:a.id},null,8,["playlist","ownership","id"])])):(0,t.kq)("",!0),n.favSong?((0,t.wg)(),(0,t.iD)("div",tl,[n.favError?((0,t.wg)(),(0,t.iD)("div",sl,(0,s.zw)(n.error),1)):(0,t.kq)("",!0),(0,t.Wm)(r,{playlist:n.favSong,ownership:n.ownership,id:a.id},null,8,["playlist","ownership","id"])])):(0,t.kq)("",!0)],64)}const ol=(e,l)=>{const a=(0,C.iH)(null),n=(0,C.iH)(null);let s=H.collection(e).doc(l);const i=s.onSnapshot((e=>{n.value=null,e.data()?(a.value={...e.data(),id:e.id},n.value=null):n.value="that document does not exist"}),(e=>{console.log(e.message),n.value="could not fetch the data"}));return(0,t.m0)((e=>{e((()=>i()))})),{error:n,document:a}};var rl=ol;const ul={class:"playlist-details"},cl={class:"playlist-info"},dl={class:"cover"},vl=["src"],pl={class:"username"},gl={class:"desc"},yl={class:"song-list"},ml={key:0,class:"alt-text"},hl={class:"details"},fl={class:"creator-info"},wl={controls:"",id:"audio"},kl=["src","type"],_l=["data-path","data-id"];function bl(e,l,a,n,i,o){const r=(0,t.up)("AddSongs");return(0,t.wg)(),(0,t.iD)("div",ul,[(0,t._)("div",cl,[(0,t._)("div",dl,[(0,t._)("img",{src:a.playlist.coverUrl},null,8,vl)]),(0,t._)("h2",null,(0,s.zw)(a.playlist.title),1),(0,t._)("p",pl,"Created by "+(0,s.zw)(a.playlist.userName),1),(0,t._)("p",gl,(0,s.zw)(a.playlist.description),1),a.ownership?((0,t.wg)(),(0,t.iD)("button",{key:0,onClick:l[0]||(l[0]=(...e)=>n.handleDelete&&n.handleDelete(...e))},"Delete Playlist")):(0,t.kq)("",!0)]),(0,t._)("div",yl,[a.playlist.songs.length?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("div",ml,"No songs have been added to the playlist yet ")),((0,t.wg)(!0),(0,t.iD)(t.HY,null,(0,t.Ko)(a.playlist.songs,(e=>((0,t.wg)(),(0,t.iD)("div",{class:"single-song",key:e.id},[(0,t._)("div",hl,[(0,t._)("div",fl,[(0,t._)("h3",null,(0,s.zw)(e.title),1),(0,t._)("p",null,(0,s.zw)(e.artist),1)]),(0,t._)("audio",wl,[(0,t._)("source",{src:e.songUrl,type:e.fileType},null,8,kl)]),a.ownership?((0,t.wg)(),(0,t.iD)("button",{key:0,onClick:l[1]||(l[1]=(...e)=>n.handleClick&&n.handleClick(...e)),"data-path":e.filePath,"data-id":e.id,class:"del-btn"},"delete",8,_l)):(0,t.kq)("",!0)])])))),128)),a.ownership?((0,t.wg)(),(0,t.j4)(r,{key:1,playlist:a.playlist},null,8,["playlist"])):(0,t.kq)("",!0)])])}const Dl=e=>((0,t.dD)("data-v-07174114"),e=e(),(0,t.Cn)(),e),Cl={class:"add-song"},Pl=Dl((()=>(0,t._)("h4",null,"Add a New Song",-1))),Sl=Dl((()=>(0,t._)("label",null," Select song: ",-1))),Hl={key:0},Fl={key:1,disabled:""};function Il(e,l,a,s,i,o){return(0,t.wg)(),(0,t.iD)("div",Cl,[s.showForm?(0,t.kq)("",!0):((0,t.wg)(),(0,t.iD)("button",{key:0,onClick:l[0]||(l[0]=e=>s.showForm=!0)},"Add Songs")),s.showForm?((0,t.wg)(),(0,t.iD)("form",{key:1,onSubmit:l[4]||(l[4]=(0,n.iM)(((...e)=>s.handleSubmit&&s.handleSubmit(...e)),["prevent"]))},[Pl,(0,t.wy)((0,t._)("input",{type:"text",placeholder:"song-title",required:"","onUpdate:modelValue":l[1]||(l[1]=e=>s.title=e)},null,512),[[n.nr,s.title]]),(0,t.wy)((0,t._)("input",{type:"text",placeholder:"Artist",required:"","onUpdate:modelValue":l[2]||(l[2]=e=>s.artist=e)},null,512),[[n.nr,s.artist]]),Sl,(0,t._)("input",{type:"file",onChange:l[3]||(l[3]=(...e)=>s.handleChange&&s.handleChange(...e)),ref:"songInput"},null,544),s.isPending?((0,t.wg)(),(0,t.iD)("button",Fl,"Loading")):((0,t.wg)(),(0,t.iD)("button",Hl,"Add Song"))],32)):(0,t.kq)("",!0)])}var ql={props:["playlist"],setup(e){const l=(0,C.iH)(""),a=(0,C.iH)(""),n=(0,C.iH)(!1),t=(0,C.iH)(null),s=(0,C.iH)(null),i=(0,C.iH)(null),{updateDoc:o}=ie("playlists",e.playlist.id),r=(0,C.iH)(!1),{user:u}=N(),{url:c,filePath:d,uploadSong:v,error:p}=Qe(),g=[1,2,3,4,5,6,7,8,9,"A","B","C","D","E","F"];function y(e){let l=Math.floor(Math.random()*e.length);for(let a=0;a<13;a++)l+=e[Math.floor(Math.random()*e.length)];return l}async function m(){if(t.value){r.value=!0,await v(t.value);const s={title:l.value,artist:a.value,id:y(g),filePath:d.value,songUrl:c.value,userId:u.value.uid,userName:u.value.displayName,fileType:i.value};console.log(s,e.id),await o({songs:[...e.playlist.songs,s]}),l.value="",a.value="",n.value=!1}r.value=!1,p.value?console.log(p.value):(console.log("song added"),r.value=!1)}function h(e){s.value=null;const l=e.target.files[0];l&&"audio/mpeg"==l.type?(t.value=l,s.value=null,i.value=l.type):(t.value=null,s.value="Please select a music file (mp3)")}return{title:l,artist:a,showForm:n,handleSubmit:m,handleChange:h,isPending:r}}};const Ul=(0,O.Z)(ql,[["render",Il],["__scopeId","data-v-07174114"]]);var Ml=Ul,jl={components:{AddSongs:Ml},props:["playlist","ownership","id"],setup(e){const{deleteDoc:l,updateDoc:a}=ie("playlists",e.id),{deleteImg:n,deleteSong:t}=Qe(),s=(0,D.tv)();async function i(){await n(e.playlist.filePath),await e.playlist.songs.forEach((e=>{t(e.filePath)})),await l(),s.push({name:"home"})}async function o(l){const n=l.target.dataset.id;path.value=l.target.dataset.path,await t(path.value);const s=e.playlist.songs.filter((e=>e.id!=n));await a({songs:s})}return{handleDelete:i,handleClick:o}}};const Al=(0,O.Z)(jl,[["render",bl],["__scopeId","data-v-39d6ab8a"]]);var El=Al,Ll={props:["id"],components:{PlaylistDetailComp:El},setup(e){console.log(e.id);const{error:l,document:a}=rl("playlists",e.id),{user:n}=N(),{document:s,error:i}=rl("favouriteSongs",e.id);console.log("fav songs:",s);const o=(0,t.Fl)((()=>a.value&&n.value&&n.value.uid===a.value.userId));return{error:l,playlist:a,ownership:o,favSong:s,favError:i}}};const zl=(0,O.Z)(Ll,[["render",il]]);var Nl=zl;const Zl=e=>((0,t.dD)("data-v-3e9eb485"),e=e(),(0,t.Cn)(),e),Ol={class:"user-playlists"},Tl=Zl((()=>(0,t._)("h2",null,"My Playlist",-1))),Vl={key:0};function xl(e,l,a,n,s,i){const o=(0,t.up)("Listview"),r=(0,t.up)("router-link");return(0,t.wg)(),(0,t.iD)("div",Ol,[Tl,n.playlists?((0,t.wg)(),(0,t.iD)("div",Vl,[(0,t.Wm)(o,{playlists:n.playlists},null,8,["playlists"])])):(0,t.kq)("",!0),(0,t.Wm)(r,{to:{name:"createPlaylist"},class:"btn"},{default:(0,t.w5)((()=>[(0,t.Uk)("Create a new Playlist")])),_:1})])}var Wl={components:{Listview:ue},setup(){const{user:e}=N(),{documents:l}=G("playlists",["userId","==",e.value.uid]);return{playlists:l}}};const Yl=(0,O.Z)(Wl,[["render",xl],["__scopeId","data-v-3e9eb485"]]);var Bl=Yl;const Kl=(e,l,a)=>{let n=F.currentUser;n?a():a({name:"login"})},Rl=[{path:"/",name:"home",component:ve,beforeEnter:Kl,props:!0},{path:"/login",name:"login",component:Se},{path:"/signup",name:"signup",component:Oe},{path:"/playlists/create",name:"createPlaylist",component:ll,beforeEnter:Kl},{path:"/playlists/:id",name:"playlistDetail",component:Nl,beforeEnter:Kl,props:!0},{path:"/playlists/user",name:"userPlaylist",component:Bl,beforeEnter:Kl}],$l=(0,D.p7)({history:(0,D.PO)("/"),routes:Rl});var Ql=$l;let Gl;F.onAuthStateChanged((()=>{Gl||(Gl=(0,n.ri)(V).use(Ql).mount("#app"))}))}},l={};function a(n){var t=l[n];if(void 0!==t)return t.exports;var s=l[n]={exports:{}};return e[n](s,s.exports,a),s.exports}a.m=e,function(){var e=[];a.O=function(l,n,t,s){if(!n){var i=1/0;for(c=0;c<e.length;c++){n=e[c][0],t=e[c][1],s=e[c][2];for(var o=!0,r=0;r<n.length;r++)(!1&s||i>=s)&&Object.keys(a.O).every((function(e){return a.O[e](n[r])}))?n.splice(r--,1):(o=!1,s<i&&(i=s));if(o){e.splice(c--,1);var u=t();void 0!==u&&(l=u)}}return l}s=s||0;for(var c=e.length;c>0&&e[c-1][2]>s;c--)e[c]=e[c-1];e[c]=[n,t,s]}}(),function(){a.n=function(e){var l=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(l,{a:l}),l}}(),function(){a.d=function(e,l){for(var n in l)a.o(l,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:l[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,l){return Object.prototype.hasOwnProperty.call(e,l)}}(),function(){a.p="/"}(),function(){var e={143:0};a.O.j=function(l){return 0===e[l]};var l=function(l,n){var t,s,i=n[0],o=n[1],r=n[2],u=0;if(i.some((function(l){return 0!==e[l]}))){for(t in o)a.o(o,t)&&(a.m[t]=o[t]);if(r)var c=r(a)}for(l&&l(n);u<i.length;u++)s=i[u],a.o(e,s)&&e[s]&&e[s][0](),e[s]=0;return a.O(c)},n=self["webpackChunkmuso_ninjas"]=self["webpackChunkmuso_ninjas"]||[];n.forEach(l.bind(null,0)),n.push=l.bind(null,n.push.bind(n))}();var n=a.O(void 0,[998],(function(){return a(3116)}));n=a.O(n)})();
//# sourceMappingURL=app.526c5b18.js.map